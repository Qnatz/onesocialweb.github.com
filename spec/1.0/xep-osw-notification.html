<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-: Social Notifications</title><link rel="stylesheet" type="text/css" href="../xmpp.css" /><link href="../prettify.css" type="text/css" rel="stylesheet" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><script type="text/javascript" src="../prettify.js"></script><meta name="DC.Title" content="Social Notifications" /><meta name="DC.Creator" content="Laurent Eschenauer" /><meta name="DC.Description" content="This draft specification defines an XMPP protocol extension for exchanging, storing and retrieving generic notification messages between users. It provides a user with a &quot;social inbox&quot; in which a user receives notifications from other users (e.g. a user activity) or directly from the user server (e.g. a relationship confirmation request). This extension is part of the OneSocialWeb suite of XMPP extensions. This extension overlaps with PubSub and PEP but differs in the access control framework used. It is our intention to work with respective editors and find ways to bring these together." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2010-01-25" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="" /></head><body onload="prettyPrint()"><h1>XEP-: Social Notifications</h1><table><tr valign="top"><td><strong>Abstract:</strong></td><td>This specification defines an XMPP protocol extension for exchanging, storing and retrieving generic notification messages between users. It provides a user with a "social inbox" in which a user receives notifications from other users (e.g. a user activity) or directly from the user server (e.g. a relationship confirmation request). This extension is part of the OneSocialWeb suite of XMPP extensions. This extension overlaps with PubSub and PEP but differs in the access control framework used. It is our intention to work with respective editors and find ways to bring these together.</td></tr><tr valign="top"><td><strong>Author:</strong></td><td>Laurent Eschenauer</td></tr><tr valign="top"><td><strong>Copyright:</strong></td><td>© 2010 Vodafone Group R&amp;D.</td></tr><tr valign="top"><td><strong>Status:</strong></td><td></td></tr><tr valign="top"><td><strong>Type:</strong></td><td></td></tr><tr valign="top"><td><strong>Version:</strong></td><td>0.0.1</td></tr><tr valign="top"><td><strong>Last Updated:</strong></td><td>2010-01-25</td></tr></table><hr /><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Overview</a><br />   
      1.1.  <a href="#intro-overview">Overview</a><br />2.  <a href="#reqs">Requirements</a><br />3.  <a href="#glossary">Glossary</a><br />4.  <a href="#publisher">Publisher Use Cases</a><br />   
      4.1.  <a href="#publisher-send">Send a notification</a><br />5.  <a href="#reader">Reader Use Cases</a><br />   
      5.1.  <a href="#reader-query">Query Latest Notifications</a><br />   
      5.2.  <a href="#reader-paginate">Paginate Through Notifications</a><br />   
      5.3.  <a href="#reader-filter">Filter Notifications</a><br />   
      5.4.  <a href="#reader-search">Search Notifications</a><br />   
      5.5.  <a href="#reader-combo">Combination of Search, Filter and Paginate</a><br />6.  <a href="#subscriber">Subscriber Use Cases</a><br />7.  <a href="#rules">Business Rules</a><br />8.  <a href="#impl">Implementation Notes</a><br />9.  <a href="#access">Accessibility Considerations</a><br />10.  <a href="#i18n">Internationalization Considerations</a><br />11.  <a href="#security">Security Considerations</a><br />12.  <a href="#iana">IANA Considerations</a><br />13.  <a href="#registrar">XMPP Registrar Considerations</a><br />14.  <a href="#schema">XML Schema</a></p><p><a href="#appendices">Appendices</a><br />    <a href="#appendix-docinfo">A: Document Information</a><br />    <a href="#appendix-authorinfo">B: Author Information</a><br />    <a href="#appendix-legal">C: Legal Notices</a><br />    <a href="#appendix-xmpp">D: Relation to XMPP</a><br />    <a href="#appendix-discuss">E: Discussion Venue</a><br />    <a href="#appendix-conformance">F: Requirements Conformance</a><br />    <a href="#appendix-notes">G: Notes</a><br />    <a href="#appendix-revs">H: Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Overview</a></h2>
  <div class="indent"><h3>1.1 <a name="intro-overview" id="intro-overview">Overview</a></h3>
    <p class="" style="">The XMPP Extension defined in this document is part of a collection of XMPP extensions that forms the OneSocialWeb (OSW) protocol. The purpose of the OneSocialWeb protocol is to enable free, open, and decentralized social applications on the web. In particular, this protocol can be used to turn any XMPP server into a full fledged social network, participating in the OneSocialWeb federation. The suite of extension covers all the usual social networking use cases such as user profiles, relationships, activity streams and third party applications. In addition, it provides support for fine grained access control, realtime notification and collaboration.</p>
    <p class="" style="">The Social notifications extension defined in this document addresses the requirement for sharing (usually in realtime) generic notification messages resulting from user activities across the social web. Since users are not expected to be always on-line, the notifications are stored in a user inbox, that can be later retrieved, searched, and filtered. A notification is a generic element consisting of a type attribute and a payload.</p>
    <p class="" style="">This protocol fills similar needs as PubSub or PEP. It is however not possible to directly use these extensions since in our case not all notifications are sent to all subscribers. Instead, the privacy settings of a notification and other business rules will determine if someone should be sent a notification.</p>
  </div>
<h2>2.
       <a name="reqs" id="reqs">Requirements</a></h2>
  <p class="" style="">STRONGLY RECOMMENDED.</p>
<h2>3.
       <a name="glossary" id="glossary">Glossary</a></h2>
  <p class="" style="">OPTIONAL.</p>
<h2>4.
       <a name="publisher" id="publisher">Publisher Use Cases</a></h2>
  <p class="" style="">This section defines the use cases for and protocols to be used by any entity that wishes to push a notification to another user.</p>

  <div class="indent"><h3>4.1 <a name="publisher-send" id="publisher-send">Send a notification</a></h3>
    <p class="" style="">An entity can send a notification to another user or server by sending a message stanza to the user bare JID, of type headline and containing a &lt;notification/&gt; element with both a &lt;type/&gt; and a &lt;payload/&gt; fields.</p>

    <p class="" style="">In the following example, &lt;romeo@montague.lit&gt; has updated his status using his social networking client. Since &lt;juliet@capulet.lit&gt; is following Romeo (she has a following relationship with him), and since Romeo's update is visible to everyone, the montague server pushes a notification to Juliet:</p>

    <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Server sends a new notification</p><div class="indent"><pre class="prettyprint">
&lt;message from="romeo@montague.lit" type="headline" to="juliet@capulet.lit" &gt;
  &lt;notification xmlns="http://onesocialweb.org/spec/1.0/"&gt;
    &lt;type&gt;http://onesocialweb.org/spec/1.0/notification/activity&lt;/type&gt;
    &lt;payload&gt;
      &lt;entry xmlns="http://www.w3.org/2005/Atom"
             xmlns:activity="http://activitystrea.ms/spec/1.0/"&gt;
        &lt;id&gt;urn:uuid:684ae7b1-08ce-4895-9c5e-8cb56d760505&lt;/id&gt;
        &lt;published&gt;2010-01-22T15:12:37.067Z&lt;/published&gt;
        &lt;title&gt;Oh my love where are thou ?&lt;/title&gt;
        &lt;activity:actor&gt;
          &lt;email&gt;romeo@montague.lit&lt;/email&gt;
          &lt;name&gt;Romeoooo&lt;/name&gt;
          &lt;uri&gt;romeo@montague.lit&lt;/uri&gt;
        &lt;/actor&gt;
        &lt;activity:object&gt;
          &lt;id&gt;urn:uuid:bd0747ae-5e02-426d-a7b2-2758cdd138a0&lt;/id&gt;
          &lt;content&gt;Oh my love where are thou ?&lt;/content&gt;
          &lt;activity:object-type&gt;http://onesocialweb.org/spec/1.0/object/status&lt;/activity:object-type&gt;
        &lt;/activity:object&gt;
        &lt;activity:verb xmlns="http://activitystrea.ms/spec/1.0/"&gt;http://activitystrea.ms/schema/1.0/post&lt;/activity:verb&gt;
      &lt;/entry&gt;
   &lt;/payload&gt;
  &lt;/notification&gt;
&lt;/message&gt;

    </pre></div>

<p class="" style="">Juliet's server intercepts the message, stores the notification in Juliet's inbox for future reading and, if Juliet is online, forwards the message to her. All items in the inbox are archived so that any client can retrieve them later.</p>

  </div>
<h2>5.
       <a name="reader" id="reader">Reader Use Cases</a></h2>
  <p class="" style="">This section defines the use cases for and protocols to be used by any entity that wishes to query its notification inbox. In particular, an entity can paginate through the archived notifications, filter them, search them and delete them.</p>

  <div class="indent"><h3>5.1 <a name="reader-query" id="reader-query">Query Latest Notifications</a></h3>

    <p class="" style="">An entity can query the latest notifications in its inbox by sending an IQ-get to its server containing  a &lt;query/&gt; element. The server replies to this request with the latest notifications. The number of activities returned SHOULD be bounded (//TODO: Should we specify a limit?). If more notifications are available, the answer SHOULD comply with <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0059.html">Result Set Management</a></span>  [<a href="#nt-id2440988">1</a>].</p>

    <p class="" style="">As an example, we have the entity, &lt;hamlet@denmark.lit&gt; opening its social networking client. The client immediately fetches the inbox of Hamlet so that he can see all the latest activities of his friends. The client sends the following request:</p>

    <p class="caption"><a name="example-2" id="example-2"></a>Example 2. User Request Latest Notifications</p><div class="indent"><pre class="prettyprint">
&lt;iq type='get'
    from='hamlet@denmark.lit/snsclient'
    to='denmark.lit'
    id='osw2'&gt;
  &lt;query xmlns="http://onesocialweb.org/protocol/0.1/notifications#query"&gt;&lt;/query&gt;
&lt;/iq&gt;
    </pre></div>

    <p class="" style="">To which Hamlet's server replies with the latest notifications in Hamlet's inbox. There are only two items in Hamlet's inbox: a status update by a friend and a relationship request by Othello.</p>

    <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Service Reply With Latest Notifications</p><div class="indent"><pre class="prettyprint">
&lt;iq type="result" 
    from='denmark.lit'
    to='hamlet@denmark.lit/snsclient'
    id='osw2'&gt;
  &lt;query xmlns="http://onesocialweb.org/protocol/0.1/notifications#query"&gt;
    &lt;notification xmlns="http://onesocialweb.org/spec/1.0/"&gt;
      &lt;type&gt;http://onesocialweb.org/spec/1.0/notification/activity&lt;/type&gt;
      &lt;payload&gt;
        &lt;entry xmlns="http://www.w3.org/2005/Atom"&gt; 
          [ ... ENTRY DETAILS ... ]
        &lt;/entry&gt;
      &lt;/payload&gt;
    &lt;/notification&gt;
    &lt;notification xmlns="http://onesocialweb.org/spec/1.0/"&gt;
      &lt;type&gt;http://onesocialweb.org/spec/1.0/notification/relationship&lt;/type&gt;
      &lt;payload&gt;
        &lt;relationship xmlns="http://onesocialweb.org/spec/1.0/"&gt;
        &lt;id&gt;urn:uuid:0bfb71a4-d8fd-4410-b119-199c3596f296&lt;/id&gt;
        &lt;published&gt;2010-01-13T12:40:51.292Z&lt;/published&gt;
        &lt;from&gt;othello@venice.lit&lt;/from&gt;
        &lt;to&gt;hamlet@denmark.lit&lt;/to&gt;
        &lt;nature&gt;http://onesocialweb.org/spec/1.0/relationship/nature/colleague&lt;/nature&gt;
        &lt;message&gt;Shall we use this network to exchange our ideas ?&lt;/message&gt;
      &lt;/payload&gt;
    &lt;/relationship&gt;
  &lt;/query&gt;
&lt;/iq&gt;
    </pre></div>
  </div>

  <div class="indent"><h3>5.2 <a name="reader-paginate" id="reader-paginate">Paginate Through Notifications</a></h3>
    <p class="" style="">[TODO: Simple example using result set management]</p>
  </div>

  <div class="indent"><h3>5.3 <a name="reader-filter" id="reader-filter">Filter Notifications</a></h3>
    <p class="" style="">[TODO: How far do we want to go ? Basic filtering by type ? Filtering inside payloads ? Allow for more specific rules supporting comparators etc... almost replicating a full blown SQL ? We need to strike a balance between filtering on server and in the client.]</p>
  </div>

  <div class="indent"><h3>5.4 <a name="reader-search" id="reader-search">Search Notifications</a></h3>
    <p class="" style="">[TODO: Similar and linked to previous item: how far to go ?]</p>
  </div>

  <div class="indent"><h3>5.5 <a name="reader-combo" id="reader-combo">Combination of Search, Filter and Paginate</a></h3>
    <p class="" style="">[TODO: Depends on decision for previous points</p>
  </div>

<h2>6.
       <a name="subscriber" id="subscriber">Subscriber Use Cases</a></h2>
  <p class="" style="">A notification may be sent to a user for two reasons:</p>
  <ul class="" style="">
    <li class="" style="">a server consider the notification relevant for the user (e.g. a server sending a new relationship notification, or a user being referd to in a activity (e.g. @reply in twitter)</li>
    <li class="" style="">the user has subscribed to received these notifications, for example indicating that he wants to "follow" another user</li>
  </ul>
  <p class="" style="">This extension does not describe a protocol for subscribing to another user notifications. Instead, this is done by setting a "following" relationship with a user. Once that relationship is in place, the other user will push notification when required to the subscriber.</p>
<h2>7.
       <a name="rules" id="rules">Business Rules</a></h2>
  <p class="" style="">OPTIONAL.</p>
<h2>8.
       <a name="impl" id="impl">Implementation Notes</a></h2>
  <p class="" style="">OPTIONAL.</p>
<h2>9.
       <a name="access" id="access">Accessibility Considerations</a></h2>
  <p class="" style="">OPTIONAL.</p>
<h2>10.
       <a name="i18n" id="i18n">Internationalization Considerations</a></h2>
  <p class="" style="">OPTIONAL.</p>
<h2>11.
       <a name="security" id="security">Security Considerations</a></h2>
  <p class="" style="">REQUIRED.</p>
<h2>12.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">REQUIRED.</p>
<h2>13.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
  <p class="" style="">REQUIRED.</p>
<h2>14.
       <a name="schema" id="schema">XML Schema</a></h2>
  <p class="" style="">REQUIRED for protocol specifications.</p>
<hr /><a name="appendices" id="appendices"></a><h2>Appendices</h2><hr /><a name="appendix-docinfo" id="appendix-docinfo"></a><h3>Appendix A: Document Information</h3><p class="indent">
            Series: <a href="http://xmpp.org/extensions/">XEP</a><br />
            Number: <br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://xmpp.org/extensions/xep-0001.html#states-"></a><br />
            Type:
            <a href="http://xmpp.org/extensions/xep-0001.html#types-"></a><br />
            Version: 0.0.1<br />
            Last Updated: 2010-01-25<br />
                Approving Body: <a href="http://xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XEP-0030, XEP-0059<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: NOT_YET_ASSIGNED<br />
              Source Control: 
                <a class="standardsButton" href="http://svn.xmpp.org:18080/browse/XMPP/trunk/extensions/xep-.xml">HTML</a> 
                <a class="standardsButton" href="http://svn.xmpp.org:18080//changelog/~rss/XMPP/trunk/extensions/xep-.xml/rss.xml">RSS</a></p><hr /><a name="appendix-authorinfo" id="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3><div class="indent"><h3>Laurent Eschenauer</h3><p class="indent">
        Email:
        <a href="mailto:laurent.eschenauer@vodafone.com">laurent.eschenauer@vodafone.com</a><br />
        JabberID: 
        <a href="xmpp:"></a><br /></p></div><hr /><a name="appendix-legal" id="appendix-legal"></a><h3>Appendix C: Legal Notices</h3><hr /><a name="appendix-xmpp" id="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><hr /><a name="appendix-discuss" id="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><hr /><a name="appendix-conformance" id="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><a name="appendix-notes" id="appendix-notes"></a><h3>Appendix G: Notes</h3><div class="indent"><p><a name="nt-id2440988" id="nt-id2440988">1</a>. XEP-0059: Result Set Management &lt;<a href="http://xmpp.org/extensions/xep-0059.html">http://xmpp.org/extensions/xep-0059.html</a>&gt;.</p></div><hr /><a name="appendix-revs" id="appendix-revs"></a><h3>Appendix H: Revision History</h3><p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p><div class="indent"><h4>Version 0.0.1 (2010-01-25)</h4><div class="indent"><p class="" style="">First draft.</p> (le)
    </div></div><hr /><p>END</p></body></html>
